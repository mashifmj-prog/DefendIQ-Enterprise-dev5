<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DefendIQ Enterprise | Mobile Security</title>
    <meta name="theme-color" content="#1a237e">
    <meta name="description" content="DefendIQ Enterprise - Mobile Cybersecurity Training & Compliance">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="manifest" href="manifest.json">
    <style>
        :root {
            --primary: #1a237e;
            --primary-light: #534bae;
            --primary-dark: #000051;
            --secondary: #00b0ff;
            --accent: #ff4081;
            --light: #f5f5f5;
            --dark: #212121;
            --success: #4caf50;
            --warning: #ff9800;
            --danger: #f44336;
            --gray: #9e9e9e;
            --bg-color: #f0f2f5;
            --text-color: #212121;
            --card-bg: white;
            --sidebar-bg: linear-gradient(to bottom, var(--primary), var(--primary-dark));
            --header-bg: white;
            --safe-area-inset-top: env(safe-area-inset-top);
            --safe-area-inset-bottom: env(safe-area-inset-bottom);
        }

        [data-theme="dark"] {
            --bg-color: #121212;
            --text-color: #f5f5f5;
            --card-bg: #1e1e1e;
            --sidebar-bg: linear-gradient(to bottom, #0d0d3d, #000022);
            --header-bg: #2d2d2d;
            --light: #2d2d2d;
            --gray: #aaaaaa;
            --dark: #f5f5f5;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            transition: background-color 0.3s, color 0.3s;
            -webkit-tap-highlight-color: transparent;
        }
        
        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
            padding-top: var(--safe-area-inset-top);
            padding-bottom: var(--safe-area-inset-bottom);
        }
        
        .container {
            display: flex;
            min-height: 100vh;
            min-height: -webkit-fill-available;
        }
        
        /* Mobile-First Sidebar */
        .sidebar {
            width: 250px;
            background: var(--sidebar-bg);
            color: white;
            padding: 20px 0;
            transition: all 0.3s;
            box-shadow: 2px 0 10px rgba(0,0,0,0.1);
            position: fixed;
            height: 100vh;
            z-index: 1000;
            transform: translateX(-100%);
        }
        
        .sidebar.mobile-open {
            transform: translateX(0);
        }
        
        .sidebar-header {
            padding: 0 20px 20px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            text-align: center;
        }
        
        .logo {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 10px;
        }
        
        .logo-icon {
            font-size: 32px;
            margin-right: 10px;
        }
        
        .logo-text {
            font-size: 20px;
            font-weight: 700;
        }
        
        .logo-iq {
            color: var(--secondary);
        }
        
        .sidebar-menu {
            list-style: none;
            padding: 20px 0;
        }
        
        .sidebar-menu li {
            padding: 10px 20px;
            transition: all 0.3s;
        }
        
        .sidebar-menu li.active {
            background-color: rgba(255,255,255,0.1);
            border-left: 4px solid var(--secondary);
        }
        
        .sidebar-menu li:hover {
            background-color: rgba(255,255,255,0.05);
        }
        
        .sidebar-menu a {
            color: white;
            text-decoration: none;
            display: flex;
            align-items: center;
        }
        
        .sidebar-menu i {
            margin-right: 10px;
            font-size: 18px;
        }
        
        /* Mobile Bottom Navigation */
        .mobile-nav {
            display: none;
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: var(--card-bg);
            border-top: 1px solid var(--light);
            z-index: 1000;
            padding: 8px 0;
            padding-bottom: calc(8px + var(--safe-area-inset-bottom));
        }
        
        .mobile-nav-items {
            display: flex;
            justify-content: space-around;
            list-style: none;
        }
        
        .mobile-nav-item {
            flex: 1;
            text-align: center;
        }
        
        .mobile-nav-link {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-decoration: none;
            color: var(--gray);
            padding: 8px 4px;
            border-radius: 8px;
            transition: all 0.3s;
        }
        
        .mobile-nav-link.active {
            color: var(--primary);
        }
        
        .mobile-nav-icon {
            font-size: 20px;
            margin-bottom: 4px;
        }
        
        .mobile-nav-label {
            font-size: 10px;
            font-weight: 500;
        }
        
        /* Main Content */
        .main-content {
            flex: 1;
            padding: 20px;
            margin-left: 0;
            width: 100%;
            padding-bottom: 80px; /* Space for mobile nav */
        }
        
        /* Mobile Header */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding: 15px 20px;
            background: var(--header-bg);
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .mobile-menu-btn {
            display: none;
            background: none;
            border: none;
            font-size: 20px;
            color: var(--primary);
            cursor: pointer;
            padding: 8px;
        }
        
        .page-title {
            font-size: 24px;
            font-weight: 600;
            color: var(--primary);
        }

        .back-button {
            background: var(--secondary);
            color: white;
            border: none;
            border-radius: 4px;
            padding: 8px 16px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
            margin-right: 15px;
        }
        
        .header-actions {
            display: flex;
            gap: 10px;
            align-items: center;
        }
        
        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 5px;
            touch-action: manipulation;
        }
        
        .btn-primary {
            background-color: var(--primary);
            color: white;
        }
        
        .btn-primary:hover {
            background-color: var(--primary-dark);
        }
        
        .btn-secondary {
            background-color: var(--secondary);
            color: white;
        }
        
        .btn-secondary:hover {
            background-color: #0091ea;
        }
        
        .user-info {
            display: flex;
            align-items: center;
        }
        
        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--primary);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-weight: bold;
        }
        
        /* Theme Toggle */
        .theme-toggle-container {
            position: absolute;
            top: 30px;
            right: 30px;
            z-index: 10;
        }
        
        .theme-toggle {
            display: flex;
            align-items: center;
            gap: 10px;
            background: var(--card-bg);
            padding: 8px 15px;
            border-radius: 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            cursor: pointer;
            border: 1px solid var(--light);
        }
        
        .theme-toggle i {
            font-size: 18px;
            color: var(--primary);
        }
        
        .theme-toggle span {
            font-weight: 500;
            color: var(--text-color);
        }
        
        /* Mobile-First Dashboard Cards */
        .dashboard-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 16px;
            margin-bottom: 30px;
        }
        
        .card {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            transition: transform 0.3s, box-shadow 0.3s;
            border: 1px solid var(--light);
        }
        
        .card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .card-title {
            font-size: 16px;
            font-weight: 600;
            color: var(--gray);
        }
        
        .card-icon {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }
        
        .card-value {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 5px;
        }
        
        .card-change {
            font-size: 14px;
            display: flex;
            align-items: center;
        }
        
        .positive {
            color: var(--success);
        }
        
        .negative {
            color: var(--danger);
        }
        
        /* Mobile Modules Grid */
        .modules-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 16px;
            margin-top: 20px;
        }
        
        .module-card {
            background: var(--light);
            border-radius: 12px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid transparent;
            position: relative;
        }
        
        .module-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            border-color: var(--secondary);
        }
        
        .module-card.offline-available::after {
            content: "📱";
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 14px;
        }
        
        .module-icon {
            font-size: 32px;
            margin-bottom: 15px;
            color: var(--primary);
        }
        
        .module-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 10px;
        }
        
        .module-desc {
            font-size: 14px;
            color: var(--gray);
            margin-bottom: 15px;
        }
        
        .module-progress {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-top: 10px;
        }
        
        .progress-text {
            font-size: 14px;
            color: var(--gray);
        }
        
        .progress-bar {
            width: 100px;
            height: 6px;
            background-color: #e0e0e0;
            border-radius: 3px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background-color: var(--secondary);
            width: 0%;
            transition: width 0.5s;
        }
        
        /* Mobile Certificate Viewer */
        .certificate-container {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 30px;
            display: none;
        }
        
        .certificate {
            background: linear-gradient(135deg, #1a237e 0%, #283593 50%, #303f9f 100%);
            color: white;
            padding: 30px;
            border-radius: 12px;
            text-align: center;
            position: relative;
            max-width: 100%;
            margin: 0 auto;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .certificate-qr-mobile {
            width: 120px;
            height: 120px;
            background: #f5f5f5;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 15px auto;
            color: #333;
            font-size: 12px;
            text-align: center;
            padding: 10px;
        }
        
        /* Offline Status Indicator */
        .offline-status {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: var(--warning);
            color: white;
            text-align: center;
            padding: 10px;
            font-weight: 500;
            z-index: 1001;
            transform: translateY(-100%);
            transition: transform 0.3s;
        }
        
        .offline-status.show {
            transform: translateY(0);
        }
        
        /* Mobile Swipe Areas */
        .swipe-hint {
            text-align: center;
            color: var(--gray);
            font-size: 14px;
            margin: 10px 0;
            display: none;
        }
        
        .swipe-hint i {
            margin: 0 5px;
        }
        
        /* PWA Install Prompt */
        .install-prompt {
            position: fixed;
            bottom: 80px;
            left: 20px;
            right: 20px;
            background: var(--card-bg);
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.15);
            z-index: 1002;
            transform: translateY(150%);
            transition: transform 0.3s;
            border: 2px solid var(--secondary);
        }
        
        .install-prompt.show {
            transform: translateY(0);
        }
        
        .install-header {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .install-icon {
            font-size: 24px;
            margin-right: 10px;
            color: var(--primary);
        }
        
        .install-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }
        
        /* Touch-Optimized Components */
        .touch-list {
            list-style: none;
        }
        
        .touch-list-item {
            padding: 16px 20px;
            border-bottom: 1px solid var(--light);
            cursor: pointer;
            transition: background-color 0.2s;
            -webkit-user-select: none;
            user-select: none;
        }
        
        .touch-list-item:active {
            background-color: var(--light);
        }
        
        .touch-list-item:last-child {
            border-bottom: none;
        }
        
        /* Mobile-Optimized Forms */
        .mobile-form {
            max-width: 100%;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
        }
        
        .form-control {
            width: 100%;
            padding: 12px 16px;
            border: 1px solid var(--light);
            border-radius: 8px;
            font-size: 16px; /* Prevents zoom on iOS */
            background: var(--card-bg);
            color: var(--text-color);
        }
        
        /* Hero Section - Mobile Optimized */
        .hero {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
            color: white;
            padding: 40px 20px;
            border-radius: 12px;
            margin-bottom: 30px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .hero::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="none"><path d="M0,0 L100,0 L100,100 Z" fill="rgba(255,255,255,0.05)"/></svg>');
            background-size: cover;
        }
        
        .hero-content {
            position: relative;
            z-index: 1;
            max-width: 800px;
            margin: 0 auto;
        }
        
        .hero h1 {
            font-size: 2.2rem;
            margin-bottom: 20px;
            font-weight: 700;
        }
        
        .slogan {
            font-size: 1.4rem;
            margin-bottom: 30px;
            font-weight: 300;
        }
        
        .slogan-part1 {
            color: #ffffff;
        }
        
        .slogan-part2 {
            color: var(--secondary);
        }
        
        .hero p {
            font-size: 1.1rem;
            margin-bottom: 30px;
            opacity: 0.9;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .hero-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 30px;
            flex-wrap: wrap;
        }
        
        .btn-hero {
            padding: 12px 30px;
            font-size: 1.1rem;
            border-radius: 30px;
            flex: 1;
            min-width: 140px;
            text-align: center;
        }
        
        .btn-outline {
            background: transparent;
            border: 2px solid white;
            color: white;
        }
        
        .btn-outline:hover {
            background: white;
            color: var(--primary);
        }
        
        /* Security Tips Banner */
        .tips-banner {
            background: var(--card-bg);
            border-radius: 8px;
            padding: 15px 20px;
            margin-bottom: 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            border-left: 4px solid var(--secondary);
            overflow: hidden;
            position: relative;
        }
        
        .tip-content {
            font-size: 16px;
            font-weight: 500;
            text-align: center;
            animation: slideIn 0.5s ease-out;
        }

        @keyframes slideIn {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        /* ZaraAI Chat Interface - Mobile Optimized */
        .zara-ai-container {
            background: var(--card-bg);
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            overflow: hidden;
            margin-bottom: 30px;
        }
        
        .zara-header {
            background: linear-gradient(to right, var(--primary), var(--primary-light));
            color: white;
            padding: 15px 20px;
            display: flex;
            align-items: center;
        }
        
        .zara-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: white;
            color: var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            font-weight: bold;
        }
        
        .zara-info h3 {
            margin-bottom: 5px;
        }
        
        .zara-info p {
            font-size: 14px;
            opacity: 0.8;
        }
        
        .zara-status {
            margin-left: auto;
            display: flex;
            align-items: center;
            font-size: 14px;
        }
        
        .status-indicator {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background-color: var(--success);
            margin-right: 5px;
        }
        
        .zara-chat {
            height: 300px;
            padding: 20px;
            overflow-y: auto;
            border-bottom: 1px solid var(--light);
            -webkit-overflow-scrolling: touch;
        }
        
        .message {
            margin-bottom: 15px;
            display: flex;
        }
        
        .message.user {
            justify-content: flex-end;
        }
        
        .message-content {
            max-width: 85%;
            padding: 12px 16px;
            border-radius: 18px;
            word-wrap: break-word;
        }
        
        .message.zara .message-content {
            background-color: var(--light);
            border-top-left-radius: 5px;
        }
        
        .message.user .message-content {
            background-color: var(--secondary);
            color: white;
            border-top-right-radius: 5px;
        }
        
        .zara-input {
            display: flex;
            padding: 15px;
            background-color: var(--light);
        }
        
        .zara-input input {
            flex: 1;
            padding: 12px 16px;
            border: 1px solid var(--light);
            border-radius: 24px;
            outline: none;
            font-size: 16px;
            background: var(--card-bg);
            color: var(--text-color);
        }
        
        .zara-input button {
            background-color: var(--secondary);
            color: white;
            border: none;
            border-radius: 50%;
            width: 44px;
            height: 44px;
            margin-left: 10px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background-color 0.3s;
        }
        
        .zara-input button:hover {
            background-color: var(--primary);
        }
        
        /* Footer */
        .footer {
            text-align: center;
            padding: 20px;
            color: var(--gray);
            font-size: 14px;
            border-top: 1px solid var(--light);
            margin-top: 30px;
        }
        
        /* Responsive Design - Mobile First */
        @media (max-width: 768px) {
            .sidebar {
                width: 280px;
            }
            
            .mobile-menu-btn {
                display: block;
            }
            
            .mobile-nav {
                display: block;
            }
            
            .main-content {
                padding-bottom: 80px;
            }
            
            .header-actions .btn span {
                display: none;
            }
            
            .header-actions .btn {
                padding: 8px 12px;
            }
            
            .user-info div:last-child {
                display: none;
            }
            
            .dashboard-cards {
                grid-template-columns: 1fr;
            }
            
            .modules-grid {
                grid-template-columns: 1fr;
            }
            
            .hero h1 {
                font-size: 1.8rem;
            }
            
            .slogan {
                font-size: 1.2rem;
            }
            
            .hero-buttons {
                flex-direction: column;
            }
            
            .btn-hero {
                width: 100%;
            }
            
            .theme-toggle-container {
                position: relative;
                top: 0;
                right: 0;
                margin-bottom: 20px;
                display: flex;
                justify-content: flex-end;
            }
            
            .swipe-hint {
                display: block;
            }
            
            .certificate {
                padding: 20px;
            }
            
            .certificate-title {
                font-size: 24px;
            }
            
            .certificate-recipient {
                font-size: 20px;
            }
        }
        
        @media (min-width: 769px) {
            .sidebar {
                transform: translateX(0);
            }
            
            .main-content {
                margin-left: 250px;
                width: calc(100% - 250px);
                padding-bottom: 20px;
            }
            
            .mobile-nav {
                display: none;
            }
            
            .mobile-menu-btn {
                display: none;
            }
        }
        
        @media (max-width: 480px) {
            .main-content {
                padding: 15px;
            }
            
            .header {
                padding: 12px 15px;
            }
            
            .card {
                padding: 15px;
            }
            
            .module-card {
                padding: 15px;
            }
            
            .hero {
                padding: 30px 15px;
            }
            
            .hero h1 {
                font-size: 1.6rem;
            }
            
            .slogan {
                font-size: 1.1rem;
            }
        }
        
        /* High DPI Display Optimization */
        @media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
            .card {
                border-width: 0.5px;
            }
            
            .module-card {
                border-width: 0.5px;
            }
        }
    </style>
</head>
<body>
    <!-- Offline Status Indicator -->
    <div class="offline-status" id="offline-status">
        <i class="fas fa-wifi"></i> You are currently offline. Some features may be limited.
    </div>

    <!-- PWA Install Prompt -->
    <div class="install-prompt" id="install-prompt">
        <div class="install-header">
            <div class="install-icon">📱</div>
            <div>
                <h4>Install DefendIQ App</h4>
                <p>Install for faster access and offline functionality</p>
            </div>
        </div>
        <div class="install-actions">
            <button class="btn btn-secondary" id="install-cancel">Not Now</button>
            <button class="btn btn-primary" id="install-confirm">Install</button>
        </div>
    </div>

    <div class="container">
        <!-- Sidebar -->
        <div class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <div class="logo-icon">🛡️</div>
                    <div class="logo-text">Defend<span class="logo-iq">IQ</span> Enterprise</div>
                </div>
                <div>ZaraAI Integrated</div>
            </div>
            <ul class="sidebar-menu">
                <li class="active"><a href="#" id="home-link"><i class="fas fa-home"></i> <span>Home</span></a></li>
                <li><a href="#"><i class="fas fa-search"></i> <span>Threat Analysis</span></a></li>
                <li><a href="#"><i class="fas fa-shield-alt"></i> <span>Security Controls</span></a></li>
                <li><a href="#" id="analytics-link"><i class="fas fa-chart-bar"></i> <span>Analytics</span></a></li>
                <li><a href="#"><i class="fas fa-chart-line"></i> <span>Reports</span></a></li>
                <li><a href="#" id="training-link"><i class="fas fa-graduation-cap"></i> <span>Training</span></a></li>
                <li><a href="#" id="compliance-link"><i class="fas fa-clipboard-check"></i> <span>Compliance</span></a></li>
                <li><a href="#" id="certificates-link"><i class="fas fa-award"></i> <span>Certificates</span></a></li>
                <li><a href="#"><i class="fas fa-cog"></i> <span>Settings</span></a></li>
            </ul>
        </div>
        
        <!-- Main Content -->
        <div class="main-content">
            <!-- Theme Toggle -->
            <div class="theme-toggle-container">
                <div class="theme-toggle" id="theme-toggle">
                    <i class="fas fa-moon"></i>
                    <span id="theme-label">Dark Mode</span>
                </div>
            </div>
            
            <div class="header">
                <div style="display: flex; align-items: center;">
                    <button class="mobile-menu-btn" id="mobile-menu-btn">
                        <i class="fas fa-bars"></i>
                    </button>
                    <button class="back-button" id="back-button" style="display: none;">
                        <i class="fas fa-arrow-left"></i> Back
                    </button>
                    <div class="page-title" id="page-title">Security Dashboard</div>
                </div>
                <div class="header-actions">
                    <button class="btn btn-primary" id="refresh-btn">
                        <i class="fas fa-sync-alt"></i> <span>Refresh</span>
                    </button>
                    <button class="btn btn-secondary" id="download-content">
                        <i class="fas fa-download"></i> <span>Offline</span>
                    </button>
                    <div class="user-info">
                        <div class="user-avatar">MJ</div>
                        <div>Admin User</div>
                    </div>
                </div>
            </div>
            
            <!-- Swipe Hint for Mobile -->
            <div class="swipe-hint">
                <i class="fas fa-hand-point-up"></i>
                Swipe up for more content
                <i class="fas fa-hand-point-up"></i>
            </div>
            
            <!-- Security Tips Banner -->
            <div class="tips-banner">
                <div class="tip-content" id="tip-content">Use strong, unique passwords for all your accounts</div>
            </div>
            
            <!-- Hero Section -->
            <div class="hero" id="hero-section">
                <div class="hero-content">
                    <h1>Mobile Cybersecurity Intelligence</h1>
                    <div class="slogan">
                        <span class="slogan-part1">Secure Anywhere</span> 
                        <span class="slogan-part2">Train Everywhere</span>
                    </div>
                    <p>Access your security training, compliance tools, and threat intelligence on any device, online or offline.</p>
                    <div class="hero-buttons">
                        <button class="btn btn-hero btn-secondary" id="pwa-features-btn">
                            <i class="fas fa-mobile-alt"></i> App Features
                        </button>
                        <button class="btn btn-hero btn-outline" id="offline-demo-btn">
                            <i class="fas fa-wifi-slash"></i> Offline Demo
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Dashboard Cards -->
            <div class="dashboard-cards" id="dashboard-cards">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">Active Threats</div>
                        <div class="card-icon" style="background-color: var(--danger);">⚠️</div>
                    </div>
                    <div class="card-value">12</div>
                    <div class="card-change positive">↓ 3 from yesterday</div>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">Protected Assets</div>
                        <div class="card-icon" style="background-color: var(--success);">🛡️</div>
                    </div>
                    <div class="card-value">247</div>
                    <div class="card-change positive">↑ 5 new</div>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">Security Score</div>
                        <div class="card-icon" style="background-color: var(--secondary);">📊</div>
                    </div>
                    <div class="card-value">92%</div>
                    <div class="card-change positive">↑ 2% improvement</div>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">Offline Content</div>
                        <div class="card-icon" style="background-color: var(--primary);">📱</div>
                    </div>
                    <div class="card-value">8/12</div>
                    <div class="card-change positive">Modules Available</div>
                </div>
            </div>
            
            <!-- Mobile Training Modules -->
            <div class="modules-container" id="modules-section" style="display: none;">
                <h2>Mobile Training Modules</h2>
                <p style="margin-bottom: 20px;">Available for offline learning. Tap to download or start training.</p>
                
                <div class="modules-grid" id="modules-grid">
                    <!-- Modules will be dynamically added here -->
                </div>
            </div>
            
            <!-- Mobile Certificate Section -->
            <div class="certificate-container" id="certificate-section">
                <div class="certificate" id="certificate">
                    <div class="certificate-logo">
                        <div class="certificate-logo-icon">🛡️</div>
                        <div class="certificate-logo-text">Defend<span style="color: var(--secondary);">IQ</span> Enterprise</div>
                    </div>
                    
                    <div class="certificate-title">Certificate of Achievement</div>
                    <div class="certificate-subtitle">This certifies that</div>
                    
                    <div class="certificate-recipient" id="certificate-recipient">Your Name</div>
                    
                    <div class="certificate-awarded">has successfully completed the</div>
                    
                    <div class="certificate-module" id="certificate-module">Cybersecurity Fundamentals Module</div>
                    
                    <div class="certificate-qr-mobile">
                        Scan to Verify<br>
                        [QR Code]
                    </div>
                    
                    <div class="certificate-details">
                        <div class="certificate-signature">
                            <div>MJ Mashifane</div>
                            <div class="signature-line"></div>
                            <div>Cybersecurity Lead</div>
                        </div>
                        
                        <div class="certificate-date">
                            <div id="certificate-date">October 15, 2024</div>
                            <div class="signature-line"></div>
                            <div>Date of Completion</div>
                        </div>
                    </div>
                </div>
                
                <div class="certificate-actions" style="margin-top: 20px; display: flex; gap: 10px; justify-content: center;">
                    <button class="btn btn-primary" id="share-certificate">
                        <i class="fas fa-share-alt"></i> Share
                    </button>
                    <button class="btn btn-secondary" id="save-certificate">
                        <i class="fas fa-save"></i> Save Offline
                    </button>
                    <button class="btn btn-secondary" id="verify-certificate">
                        <i class="fas fa-qrcode"></i> Verify
                    </button>
                </div>
            </div>
            
            <!-- ZaraAI Chat Interface -->
            <div class="zara-ai-container">
                <div class="zara-header">
                    <div class="zara-avatar">Z</div>
                    <div class="zara-info">
                        <h3>ZaraAI Security Assistant</h3>
                        <p>Your AI-powered security companion & productivity partner</p>
                    </div>
                    <div class="zara-status">
                        <div class="status-indicator"></div>
                        <span>Online</span>
                    </div>
                </div>
                
                <div class="zara-chat" id="chat-messages">
                    <div class="message zara">
                        <div class="message-content">
                            Hello! I'm ZaraAI, now optimized for mobile. I can help you with security training even when you're offline!
                        </div>
                    </div>
                    <div class="message user">
                        <div class="message-content">
                            Great! What mobile features are available?
                        </div>
                    </div>
                    <div class="message zara">
                        <div class="message-content">
                            You can download training modules for offline use, access your certificates, and get basic security assistance without internet. Tap the download button to get started!
                        </div>
                    </div>
                </div>
                
                <div class="zara-input">
                    <input type="text" id="user-input" placeholder="Ask ZaraAI about mobile features or offline access...">
                    <button id="send-btn">
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
            </div>
            
            <div class="footer">
                DefendIQ Enterprise with ZaraAI | © 2025 Security Systems | All rights reserved
            </div>
        </div>
    </div>

    <!-- Mobile Bottom Navigation -->
    <nav class="mobile-nav">
        <ul class="mobile-nav-items">
            <li class="mobile-nav-item">
                <a href="#" class="mobile-nav-link active" data-page="dashboard">
                    <div class="mobile-nav-icon">🏠</div>
                    <div class="mobile-nav-label">Home</div>
                </a>
            </li>
            <li class="mobile-nav-item">
                <a href="#" class="mobile-nav-link" data-page="training">
                    <div class="mobile-nav-icon">📚</div>
                    <div class="mobile-nav-label">Training</div>
                </a>
            </li>
            <li class="mobile-nav-item">
                <a href="#" class="mobile-nav-link" data-page="certificates">
                    <div class="mobile-nav-icon">🏆</div>
                    <div class="mobile-nav-label">Certs</div>
                </a>
            </li>
            <li class="mobile-nav-item">
                <a href="#" class="mobile-nav-link" data-page="downloads">
                    <div class="mobile-nav-icon">📥</div>
                    <div class="mobile-nav-label">Offline</div>
                </a>
            </li>
            <li class="mobile-nav-item">
                <a href="#" class="mobile-nav-link" id="mobile-menu-toggle">
                    <div class="mobile-nav-icon">☰</div>
                    <div class="mobile-nav-label">Menu</div>
                </a>
            </li>
        </ul>
    </nav>

    <script>
        // PWA Manifest (inline for demo - in production this would be a separate file)
        const manifest = {
            "name": "DefendIQ Enterprise",
            "short_name": "DefendIQ",
            "description": "Mobile Cybersecurity Training & Compliance Platform",
            "start_url": "/",
            "display": "standalone",
            "background_color": "#1a237e",
            "theme_color": "#1a237e",
            "orientation": "portrait-primary",
            "icons": [
                {
                    "src": "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTkyIiBoZWlnaHQ9IjE5MiIgdmlld0JveD0iMCAwIDE5MiAxOTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxOTIiIGhlaWdodD0iMTkyIiByeD0iMjQiIGZpbGw9IiMxYTIzN2UiLz4KPHBhdGggZD0iTTk2IDM2TDEyNiA3Nkg2Nkw5NiAzNloiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik02NiAxMTZIMTI2TDEwNiAxNTZIODZMNjYgMTE2WiIgZmlsbD0id2hpdGUiLz4KPHBhdGggZD0iTTk2IDE3Nkw2NiAxMzZIMTI2TDk2IDE3NloiIGZpbGw9IiMwMGIwZmYiLz4KPC9zdmc+",
                    "sizes": "192x192",
                    "type": "image/svg+xml"
                },
                {
                    "src": "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTEyIiBoZWlnaHQ9IjUxMiIgdmlld0JveD0iMCAwIDUxMiA1MTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSI1MTIiIGhlaWdodD0iNTEyIiByeD0iNjQiIGZpbGw9IiMxYTIzN2UiLz4KPHBhdGggZD0iTTI1NiA5NkwyOTQgMjA0SDIxOEwyNTYgOTZaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMjE4IDMwOEgyOTRMMjc0IDQxNkgyMzhMMjE4IDMwOFoiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik0yNTYgNDY4TDIxOCAzNjhIMjk0TDI1NiA0NjhaIiBmaWxsPSIjMDBiMGZmIi8+Cjwvc3ZnPg==",
                    "sizes": "512x512",
                    "type": "image/svg+xml"
                }
            ]
        };

        // Current application state
        let currentState = {
            page: 'dashboard',
            theme: 'light',
            isOnline: navigator.onLine,
            installed: false,
            deferredPrompt: null,
            offlineContent: {
                downloaded: ['fundamentals', 'phishing'],
                available: ['fundamentals', 'phishing', 'data-protection', 'incident-response']
            }
        };

        // DOM elements
        const homeLink = document.getElementById('home-link');
        const analyticsLink = document.getElementById('analytics-link');
        const trainingLink = document.getElementById('training-link');
        const complianceLink = document.getElementById('compliance-link');
        const certificatesLink = document.getElementById('certificates-link');
        const refreshBtn = document.getElementById('refresh-btn');
        const downloadContentBtn = document.getElementById('download-content');
        const backButton = document.getElementById('back-button');
        const pageTitle = document.getElementById('page-title');
        const heroSection = document.getElementById('hero-section');
        const dashboardCards = document.getElementById('dashboard-cards');
        const modulesSection = document.getElementById('modules-section');
        const modulesGrid = document.getElementById('modules-grid');
        const certificateSection = document.getElementById('certificate-section');
        const mobileMenuBtn = document.getElementById('mobile-menu-btn');
        const sidebar = document.getElementById('sidebar');
        const mobileNavLinks = document.querySelectorAll('.mobile-nav-link');
        const mobileMenuToggle = document.getElementById('mobile-menu-toggle');
        const themeToggle = document.getElementById('theme-toggle');
        const themeLabel = document.getElementById('theme-label');
        const tipContent = document.getElementById('tip-content');
        const offlineStatus = document.getElementById('offline-status');
        const installPrompt = document.getElementById('install-prompt');
        const installCancel = document.getElementById('install-cancel');
        const installConfirm = document.getElementById('install-confirm');
        const pwaFeaturesBtn = document.getElementById('pwa-features-btn');
        const offlineDemoBtn = document.getElementById('offline-demo-btn');
        const saveCertificateBtn = document.getElementById('save-certificate');
        const verifyCertificateBtn = document.getElementById('verify-certificate');

        // Training modules data with offline availability
        const trainingModules = [
            {
                id: 'fundamentals',
                title: 'Cybersecurity Fundamentals',
                icon: '🛡️',
                description: 'Learn the basics of cybersecurity, common threats, and protection strategies.',
                progress: 0,
                offline: true,
                size: '2.3 MB'
            },
            {
                id: 'phishing',
                title: 'Phishing Defense',
                icon: '🎣',
                description: 'Learn to identify and protect against phishing attacks and social engineering.',
                progress: 0,
                offline: true,
                size: '1.8 MB'
            },
            {
                id: 'data-protection',
                title: 'Data Protection',
                icon: '🔒',
                description: 'Understand data classification, encryption, and protection best practices.',
                progress: 0,
                offline: true,
                size: '3.1 MB'
            },
            {
                id: 'mobile-security',
                title: 'Mobile Security',
                icon: '📱',
                description: 'Secure your mobile devices and protect against mobile-specific threats.',
                progress: 0,
                offline: false,
                size: '2.5 MB'
            },
            {
                id: 'incident-response',
                title: 'Incident Response',
                icon: '🚨',
                description: 'Learn proper procedures for detecting and responding to security incidents.',
                progress: 0,
                offline: true,
                size: '2.7 MB'
            },
            {
                id: 'cloud-security',
                title: 'Cloud Security',
                icon: '☁️',
                description: 'Understand cloud security principles and shared responsibility models.',
                progress: 0,
                offline: false,
                size: '2.9 MB'
            }
        ];

        // ZaraAI Chat Functionality
        const chatMessages = document.getElementById('chat-messages');
        const userInput = document.getElementById('user-input');
        const sendBtn = document.getElementById('send-btn');
        
        // Enhanced ZaraAI responses with mobile focus
        const zaraResponses = {
            mobile: [
                "I'm optimized for mobile! You can download training modules for offline learning and access your certificates without internet.",
                "Tap the download button to save modules for offline use. I'll help you continue learning even when you're on the go!",
                "Your mobile app includes offline capabilities, push notifications, and touch-optimized interfaces for better security training.",
                "I can assist you with basic security questions even when you're offline. Download modules now to get started!"
            ],
            offline: [
                "You're currently offline. I can still help with basic security guidance and show your downloaded training content.",
                "Offline mode activated! You can access downloaded modules and certificates. Some features require internet connection.",
                "I see you're offline. Your downloaded training modules are still available. Would you like to review them?",
                "Offline access enabled. You can continue learning with downloaded content. Reconnect for full features."
            ],
            pwa: [
                "Install the DefendIQ app for faster loading, offline access, and push notifications for security alerts!",
                "As a Progressive Web App, I work on any device and can be installed like a native app from your browser.",
                "PWA features include offline functionality, home screen installation, and seamless updates without app stores.",
                "Install me to your home screen for quick access to security training and compliance tools anytime!"
            ]
        };
        
        // Function to add a message to the chat
        function addMessage(message, isUser) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${isUser ? 'user' : 'zara'}`;
            
            const contentDiv = document.createElement('div');
            contentDiv.className = 'message-content';
            contentDiv.textContent = message;
            
            messageDiv.appendChild(contentDiv);
            chatMessages.appendChild(messageDiv);
            
            // Scroll to bottom
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }
        
        // Function to get ZaraAI response
        function getZaraResponse(userMessage = '') {
            const lowerMessage = userMessage.toLowerCase();
            
            // Check for specific triggers
            if (lowerMessage.includes('mobile') || lowerMessage.includes('app') || lowerMessage.includes('phone')) {
                const responses = zaraResponses.mobile;
                return responses[Math.floor(Math.random() * responses.length)];
            }
            
            if (lowerMessage.includes('offline') || lowerMessage.includes('download') || lowerMessage.includes('no wifi')) {
                const responses = zaraResponses.offline;
                return responses[Math.floor(Math.random() * responses.length)];
            }
            
            if (lowerMessage.includes('install') || lowerMessage.includes('pwa') || lowerMessage.includes('progressive')) {
                const responses = zaraResponses.pwa;
                return responses[Math.floor(Math.random() * responses.length)];
            }
            
            // Default mobile response
            const mobileResponses = zaraResponses.mobile;
            return mobileResponses[Math.floor(Math.random() * mobileResponses.length)];
        }
        
        // Send message function
        function sendMessage() {
            const message = userInput.value.trim();
            
            if (message) {
                // Add user message
                addMessage(message, true);
                
                // Clear input
                userInput.value = '';
                
                // Simulate ZaraAI thinking
                setTimeout(() => {
                    // Add ZaraAI response
                    addMessage(getZaraResponse(message), false);
                }, 1000);
            }
        }

        // Navigation functions
        function showDashboard() {
            currentState.page = 'dashboard';
            pageTitle.textContent = 'Security Dashboard';
            heroSection.style.display = 'block';
            dashboardCards.style.display = 'grid';
            modulesSection.style.display = 'none';
            certificateSection.style.display = 'none';
            backButton.style.display = 'none';
            updateMobileNav('dashboard');
        }

        function showTraining() {
            currentState.page = 'training';
            pageTitle.textContent = 'Mobile Training';
            heroSection.style.display = 'none';
            dashboardCards.style.display = 'none';
            modulesSection.style.display = 'block';
            certificateSection.style.display = 'none';
            backButton.style.display = 'inline-flex';
            updateMobileNav('training');
            
            // Load modules
            loadModules();
        }

        function showCertificates() {
            currentState.page = 'certificates';
            pageTitle.textContent = 'My Certificates';
            heroSection.style.display = 'none';
            dashboardCards.style.display = 'none';
            modulesSection.style.display = 'none';
            certificateSection.style.display = 'block';
            backButton.style.display = 'inline-flex';
            updateMobileNav('certificates');
        }

        function showDownloads() {
            currentState.page = 'downloads';
            pageTitle.textContent = 'Offline Content';
            heroSection.style.display = 'none';
            dashboardCards.style.display = 'none';
            modulesSection.style.display = 'block';
            certificateSection.style.display = 'none';
            backButton.style.display = 'inline-flex';
            updateMobileNav('downloads');
            
            // Load download management view
            loadDownloadManagement();
        }

        function updateMobileNav(activePage) {
            mobileNavLinks.forEach(link => {
                link.classList.remove('active');
                if (link.dataset.page === activePage) {
                    link.classList.add('active');
                }
            });
        }

        // Load modules function with offline status
        function loadModules() {
            modulesGrid.innerHTML = '';
            
            trainingModules.forEach(module => {
                const moduleCard = document.createElement('div');
                moduleCard.className = `module-card ${module.offline ? 'offline-available' : ''}`;
                moduleCard.dataset.id = module.id;
                
                const progress = currentState.offlineContent.downloaded.includes(module.id) ? 100 : 0;
                const status = currentState.offlineContent.downloaded.includes(module.id) ? 'Downloaded' : (module.offline ? 'Available' : 'Online Only');
                
                moduleCard.innerHTML = `
                    <div class="module-icon">${module.icon}</div>
                    <div class="module-title">${module.title}</div>
                    <div class="module-desc">${module.description}</div>
                    <div class="module-progress">
                        <div class="progress-text">${status} • ${module.size}</div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${progress}%"></div>
                        </div>
                    </div>
                    ${module.offline ? 
                        `<button class="btn ${currentState.offlineContent.downloaded.includes(module.id) ? 'btn-success' : 'btn-primary'}" 
                                style="margin-top: 10px; width: 100%;" 
                                onclick="toggleDownload('${module.id}')">
                            <i class="fas fa-${currentState.offlineContent.downloaded.includes(module.id) ? 'check' : 'download'}"></i>
                            ${currentState.offlineContent.downloaded.includes(module.id) ? 'Downloaded' : 'Download'}
                        </button>` 
                        : ''
                    }
                `;
                
                if (module.offline) {
                    moduleCard.addEventListener('click', function(e) {
                        if (!e.target.closest('button')) {
                            const moduleId = this.dataset.id;
                            if (currentState.offlineContent.downloaded.includes(moduleId)) {
                                alert(`Starting ${module.title} in offline mode...`);
                            } else {
                                alert(`Download ${module.title} first to access offline`);
                            }
                        }
                    });
                }
                
                modulesGrid.appendChild(moduleCard);
            });
        }

        function loadDownloadManagement() {
            modulesGrid.innerHTML = '<h3 style="grid-column: 1 / -1; text-align: center; margin: 20px 0;">Offline Content Management</h3>';
            
            trainingModules.forEach(module => {
                if (module.offline) {
                    const moduleCard = document.createElement('div');
                    moduleCard.className = 'module-card';
                    moduleCard.innerHTML = `
                        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 15px;">
                            <div>
                                <div class="module-title">${module.title}</div>
                                <div class="module-desc">${module.size} • ${module.offline ? 'Offline Available' : 'Online Only'}</div>
                            </div>
                            <span class="status-badge ${currentState.offlineContent.downloaded.includes(module.id) ? 'status-completed' : 'status-pending'}">
                                ${currentState.offlineContent.downloaded.includes(module.id) ? 'Downloaded' : 'Available'}
                            </span>
                        </div>
                        <button class="btn ${currentState.offlineContent.downloaded.includes(module.id) ? 'btn-danger' : 'btn-primary'}" 
                                style="width: 100%;" 
                                onclick="toggleDownload('${module.id}')">
                            <i class="fas fa-${currentState.offlineContent.downloaded.includes(module.id) ? 'trash' : 'download'}"></i>
                            ${currentState.offlineContent.downloaded.includes(module.id) ? 'Remove' : 'Download'} Offline
                        </button>
                    `;
                    modulesGrid.appendChild(moduleCard);
                }
            });
        }

        // Download management
        function toggleDownload(moduleId) {
            const index = currentState.offlineContent.downloaded.indexOf(moduleId);
            
            if (index > -1) {
                // Remove download
                currentState.offlineContent.downloaded.splice(index, 1);
                alert('Module removed from offline storage');
            } else {
                // Add download
                if (currentState.isOnline) {
                    currentState.offlineContent.downloaded.push(moduleId);
                    alert('Module downloaded for offline use');
                } else {
                    alert('Internet connection required to download modules');
                    return;
                }
            }
            
            // Refresh the current view
            if (currentState.page === 'training') {
                loadModules();
            } else if (currentState.page === 'downloads') {
                loadDownloadManagement();
            }
            
            // Update offline content count in dashboard
            updateOfflineContentCount();
        }

        function updateOfflineContentCount() {
            const offlineCard = document.querySelector('.dashboard-cards .card:nth-child(4) .card-value');
            if (offlineCard) {
                offlineCard.textContent = `${currentState.offlineContent.downloaded.length}/${currentState.offlineContent.available.length}`;
            }
        }

        // Mobile sidebar toggle
        function toggleMobileMenu() {
            sidebar.classList.toggle('mobile-open');
        }

        // Offline status management
        function updateOnlineStatus() {
            currentState.isOnline = navigator.onLine;
            if (currentState.isOnline) {
                offlineStatus.classList.remove('show');
                addMessage("You're back online! All features are now available.", false);
            } else {
                offlineStatus.classList.add('show');
                addMessage("You're currently offline. Some features may be limited.", false);
            }
        }

        // PWA Installation
        function showInstallPrompt() {
            if (currentState.deferredPrompt && !currentState.installed) {
                installPrompt.classList.add('show');
            }
        }

        function hideInstallPrompt() {
            installPrompt.classList.remove('show');
        }

        async function installPWA() {
            if (currentState.deferredPrompt) {
                currentState.deferredPrompt.prompt();
                const { outcome } = await currentState.deferredPrompt.userChoice;
                if (outcome === 'accepted') {
                    currentState.installed = true;
                    addMessage("DefendIQ app installed successfully! You can now access it from your home screen.", false);
                }
                currentState.deferredPrompt = null;
            }
            hideInstallPrompt();
        }

        // Theme toggle function
        function toggleTheme() {
            if (currentState.theme === 'light') {
                currentState.theme = 'dark';
                document.documentElement.setAttribute('data-theme', 'dark');
                themeToggle.innerHTML = '<i class="fas fa-sun"></i> <span id="theme-label">Light Mode</span>';
                themeLabel.textContent = 'Light Mode';
            } else {
                currentState.theme = 'light';
                document.documentElement.setAttribute('data-theme', 'light');
                themeToggle.innerHTML = '<i class="fas fa-moon"></i> <span id="theme-label">Dark Mode</span>';
                themeLabel.textContent = 'Dark Mode';
            }
        }

        // Security tips rotation
        function rotateSecurityTip() {
            const tips = [
                "Use strong, unique passwords for all your accounts",
                "Enable multi-factor authentication whenever possible",
                "Keep your software and systems updated regularly",
                "Download training modules for offline learning",
                "Install the DefendIQ app for faster mobile access",
                "Use touch ID or face ID for quick mobile access",
                "Enable automatic updates for security patches"
            ];
            currentState.currentTipIndex = (currentState.currentTipIndex + 1) % tips.length;
            tipContent.textContent = tips[currentState.currentTipIndex];
        }

        // Back button functionality
        function goBack() {
            switch(currentState.page) {
                case 'training':
                case 'certificates':
                case 'downloads':
                    showDashboard();
                    break;
                default:
                    showDashboard();
            }
        }

        // Event listeners
        document.addEventListener('DOMContentLoaded', function() {
            // Set current date for certificate
            const today = new Date();
            document.getElementById('certificate-date').textContent = today.toLocaleDateString('en-US', { 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            });
            
            // Navigation
            homeLink.addEventListener('click', function(e) {
                e.preventDefault();
                showDashboard();
            });
            
            trainingLink.addEventListener('click', function(e) {
                e.preventDefault();
                showTraining();
            });
            
            certificatesLink.addEventListener('click', function(e) {
                e.preventDefault();
                showCertificates();
            });
            
            // Mobile navigation
            mobileNavLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const page = this.dataset.page;
                    if (page === 'dashboard') showDashboard();
                    else if (page === 'training') showTraining();
                    else if (page === 'certificates') showCertificates();
                    else if (page === 'downloads') showDownloads();
                });
            });
            
            mobileMenuBtn.addEventListener('click', toggleMobileMenu);
            mobileMenuToggle.addEventListener('click', toggleMobileMenu);
            
            // Back button
            backButton.addEventListener('click', goBack);
            
            // Refresh button
            refreshBtn.addEventListener('click', function() {
                const originalText = refreshBtn.innerHTML;
                refreshBtn.innerHTML = '<i class="fas fa-check"></i> <span>Refreshed</span>';
                setTimeout(() => {
                    refreshBtn.innerHTML = originalText;
                }, 2000);
            });
            
            // Download content
            downloadContentBtn.addEventListener('click', function() {
                showDownloads();
            });
            
            // PWA Features
            pwaFeaturesBtn.addEventListener('click', function() {
                addMessage("DefendIQ PWA Features:\n• Install to home screen\n• Offline training access\n• Push notifications\n• Fast loading\n• Cross-platform compatibility", false);
                showInstallPrompt();
            });
            
            offlineDemoBtn.addEventListener('click', function() {
                // Simulate offline mode
                const wasOnline = currentState.isOnline;
                currentState.isOnline = false;
                updateOnlineStatus();
                
                setTimeout(() => {
                    currentState.isOnline = wasOnline;
                    updateOnlineStatus();
                }, 5000);
            });
            
            // Certificate actions
            saveCertificateBtn.addEventListener('click', function() {
                alert('Certificate saved to your device. You can access it offline from the Certificates section.');
            });
            
            verifyCertificateBtn.addEventListener('click', function() {
                alert('QR Code Scanner activated! Point your camera at a certificate QR code to verify its authenticity.');
            });
            
            // Install prompt
            installCancel.addEventListener('click', hideInstallPrompt);
            installConfirm.addEventListener('click', installPWA);
            
            // ZaraAI chat
            sendBtn.addEventListener('click', sendMessage);
            userInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    sendMessage();
                }
            });
            
            // Theme toggle
            themeToggle.addEventListener('click', toggleTheme);
            
            // Security tips rotation
            setInterval(rotateSecurityTip, 5000);
            
            // Online/offline events
            window.addEventListener('online', updateOnlineStatus);
            window.addEventListener('offline', updateOnlineStatus);
            
            // PWA install prompt
            window.addEventListener('beforeinstallprompt', (e) => {
                e.preventDefault();
                currentState.deferredPrompt = e;
                // Show install button after a delay
                setTimeout(showInstallPrompt, 3000);
            });
            
            // Swipe support for mobile
            let touchStartY = 0;
            document.addEventListener('touchstart', (e) => {
                touchStartY = e.changedTouches[0].screenY;
            });
            
            document.addEventListener('touchend', (e) => {
                const touchEndY = e.changedTouches[0].screenY;
                const diff = touchStartY - touchEndY;
                
                // Swipe up from bottom
                if (diff > 50 && touchStartY > window.innerHeight - 100) {
                    showTraining();
                }
            });
            
            // Initialize
            updateOnlineStatus();
            updateOfflineContentCount();
            
            // Welcome message with mobile focus
            setTimeout(() => {
                addMessage("Welcome to DefendIQ Mobile! I'm optimized for your device with offline capabilities, touch-friendly interfaces, and mobile-specific features. How can I assist you today?", false);
            }, 2000);
        });

        // Service Worker Registration (commented out for demo - would be active in production)
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then((registration) => {
                        console.log('SW registered: ', registration);
                    })
                    .catch((registrationError) => {
                        console.log('SW registration failed: ', registrationError);
                    });
            });
        }
    </script>
</body>
</html>